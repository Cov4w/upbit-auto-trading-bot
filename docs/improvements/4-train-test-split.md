# 4. Train/Test/Validation Split (ì‹œê³„ì—´ ë¶„í• )

## ğŸ“‹ ê°œìš”
- **ìš°ì„ ìˆœìœ„:** 4ìœ„
- **íš¨ê³¼:** â­â­â­â­
- **ë‚œì´ë„:** ì‰¬ì›€
- **ì†Œìš” ì‹œê°„:** 30ë¶„
- **ì˜ˆìƒ íš¨ê³¼:** ê³¼ì í•© ë°©ì§€, ì‹¤ì „ ì •í™•ë„ í–¥ìƒ

## ğŸ¯ ëª©ì 
ì‹œê³„ì—´ íŠ¹ì„±ì„ ê³ ë ¤í•œ ë°ì´í„° ë¶„í• ë¡œ **ì‹¤ì „ê³¼ ë™ì¼í•œ ì¡°ê±´**ì—ì„œ ëª¨ë¸ì„ ê²€ì¦í•©ë‹ˆë‹¤.

## âŒ í˜„ì¬ ë¬¸ì œì 
```python
# ëœë¤ ë¶„í•  (ì˜ëª»ë¨!)
X_train, X_test = train_test_split(X, y, test_size=0.2, random_state=42)

ë¬¸ì œ:
- ê³¼ê±° ë°ì´í„°(80%) + ë¯¸ë˜ ë°ì´í„°(20%)ê°€ ì„ì„
- ì‹œê°„ ìˆœì„œ ë¬´ì‹œ
- "ë¯¸ë˜ ë°ì´í„°ë¡œ í•™ìŠµ â†’ ê³¼ê±° ì˜ˆì¸¡" (í˜„ì‹¤ ë¶ˆê°€ëŠ¥)
```

**ì˜ˆì‹œ:**
```
ì „ì²´ ë°ì´í„°: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
ëœë¤ ë¶„í• :
- Train: [1, 3, 5, 6, 8, 9, 10]  â† 10ë²ˆ í¬í•¨!
- Test: [2, 4, 7]                â† 2ë²ˆ ì˜ˆì¸¡?
â†’ 10ë²ˆ ë°ì´í„°ë¡œ 2ë²ˆ ì˜ˆì¸¡í•˜ëŠ” ë¹„í˜„ì‹¤ì  ìƒí™©
```

## âœ… í•´ê²° ë°©ë²• (ì‹œê³„ì—´ ë¶„í• )

### Walk-Forward Validation
```python
# ì‹œê°„ ìˆœì„œ ìœ ì§€
total = len(data)
train_end = int(total * 0.7)    # 70%
val_end = int(total * 0.85)     # 15%
                                 # 15% (test)

X_train = data[:train_end]       # ì²˜ìŒ 70% (ê³¼ê±°)
y_train = labels[:train_end]

X_val = data[train_end:val_end]  # ì¤‘ê°„ 15% (ê²€ì¦)
y_val = labels[train_end:val_end]

X_test = data[val_end:]          # ë§ˆì§€ë§‰ 15% (ë¯¸ë˜)
y_test = labels[val_end:]
```

**ì˜ˆì‹œ:**
```
ì „ì²´: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
ë¶„í• :
- Train: [1, 2, 3, 4, 5, 6, 7]    (70%)
- Val:   [8, 9]                   (20%)
- Test:  [10]                     (10%)
â†’ 1~7ë¡œ í•™ìŠµ â†’ 8~9ë¡œ ê²€ì¦ â†’ 10 ì˜ˆì¸¡ (í˜„ì‹¤ì !)
```

## ğŸ“Š ì ìš© ì „í›„ ë¹„êµ

### Before (ëœë¤ ë¶„í• )
```
í…ŒìŠ¤íŠ¸ ì •í™•ë„: 60%
ì‹¤ì „ ì •í™•ë„: 47% â† 16%p ì°¨ì´! ğŸ˜±
ì´ìœ : ê³¼ì í•© (ë¯¸ë˜ ë°ì´í„°ë¡œ í•™ìŠµ)
```

### After (ì‹œê³„ì—´ ë¶„í• )
```
í…ŒìŠ¤íŠ¸ ì •í™•ë„: 52%
ì‹¤ì „ ì •í™•ë„: 50% â† 2%p ì°¨ì´ (ì‹ ë¢° ê°€ëŠ¥)
ì´ìœ : í˜„ì‹¤ì ì¸ ê²€ì¦
```

## ğŸ”§ êµ¬í˜„ ìœ„ì¹˜
- **íŒŒì¼:** `data_manager.py`
- **í´ë˜ìŠ¤:** `ModelLearner`
- **ë©”ì„œë“œ:** `train_initial_model()`

## ğŸ“ˆ 3ë‹¨ê³„ ë¶„í•  ì´ìœ 

1. **Train (70%):** ëª¨ë¸ í•™ìŠµ
2. **Validation (15%):** í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹
3. **Test (15%):** ìµœì¢… ì„±ëŠ¥ í‰ê°€

```python
# Validationìœ¼ë¡œ ìµœì  íŒŒë¼ë¯¸í„° ì°¾ê¸°
for max_depth in [3, 5, 7]:
    model = XGBClassifier(max_depth=max_depth)
    model.fit(X_train, y_train)
    val_score = model.score(X_val, y_val)
    # ìµœê³  ì ìˆ˜ ì„ íƒ

# Testë¡œ ì‹¤ì „ ì„±ëŠ¥ ì˜ˆì¸¡
final_score = best_model.score(X_test, y_test)
```

## ğŸ’¡ ì£¼ì˜ì‚¬í•­
- ë°ì´í„°ê°€ 50ê±´ ë¯¸ë§Œì¼ ë•ŒëŠ” Validation ìƒëµ (Train 80% / Test 20%)
- ì‹œê°„ ìˆœì„œ ì ˆëŒ€ ì„ì§€ ë§ ê²ƒ
- Test ë°ì´í„°ëŠ” ìµœì¢… í‰ê°€ì—ë§Œ ì‚¬ìš©

## ğŸ”— ì°¸ê³  ìë£Œ
- Freqtrade Backtesting: https://www.freqtrade.io/en/stable/backtesting/
- Time Series Cross-Validation: https://scikit-learn.org/stable/modules/cross_validation.html#time-series-split
